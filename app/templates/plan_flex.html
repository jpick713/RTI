{%extends "base2.html" %}

{%block content%}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
  
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>

<link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>

<link rel="stylesheet" href="/static/jquery-ui-1.12.1.custom/jquery-ui.min.css">
<link rel="stylesheet" href="/static/jquery-ui-1.12.1.custom/jquery-ui.structure.min.css">
<link rel="stylesheet" href="/static/jquery-ui-1.12.1.custom/jquery-ui.theme.min.css">
<script src="/static/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
<script src="/static/jasonday-printThis-0aa7434/printThis.js"></script>

<style>
	.cols {
		font-size:130%;
		color:white;
	}
	li.active {background-color: rgba(80,200,120,0.75);
				}
	.cols-body{
		font-size:130%;
	}
</style>

<div class="container" style="background-color:rgba(80,200,120,1); width:95%; max-width:1700px; min-width:1100px; padding-top:0.25em; margin-top:1em;">
	<div class="columns" style="display:flex; justify-content:space-evenly; align-items:center">
		<div class="cols" style="width: 40%;"><h1>Intervention Plan</h1></div>
		<div class="cols" style="width: 50%"><br>
		    {%if plan.plan_final%}<button class="btn btn-md btn-secondary" id="print_plan_sheet">Print Plan</button> &emsp;{%endif%}
		    <button onclick="window.location.href='/RTI/{{student.student_name}}/{{student.student_id}}'" class="btn btn-md btn-secondary" id="plan_close">Return to Student's page</button> &emsp;  
		    <button class="btn btn-md btn-info" type="submit" form="student_plan_info" onclick="remove_save()" id="save_plan">Save</button>
		</div>
	</div>
	<form id="student_plan_info" action="" method="post" novalidate>
	<input type="hidden" id="fid_allow" name="all_fid_answered" value=1 />	
	<div class="columns" style="display:flex; justify-content:flex-start; align-items:center; padding-top:1em">
		<div class="cols" style="text-align:right; width:25%;">
			<b>Name:</b>
		</div>
		<div class="cols" style="width:20%; padding-left:0.5em">
			<b>{{student.student_name}}</b>
		</div>
		<div class="cols" style="text-align:right; width:15%;">
			<b>Date of Birth:</b>
		</div>
		<div class="cols" style=" width:20%; padding-left: 0.5em">
			<b>{{student.date_birth}}</b>
		</div>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; align-items:center; padding-top:0.1em">
		<div class="cols" style="text-align:right; width:25%;">
			<b>Current School:</b>
		</div>
		<div class="cols" style="width:20%; padding-left:0.5em">
			<b>{{student.school}}</b>
		</div>
		<div class="cols" style="text-align:right; width:15%;">
			<b>Grade:</b>
		</div>
		<div class="cols" style=" width:20%; padding-left: 0.5em">
			<b>{%if student.grade==0%}K{%else%}{{student.grade}}{%endif%}</b>
		</div>
		<div class="cols" style="text-align:left; width:20%;">
			{% if plan.plan_final==False %}<button class="btn btn-md btn-info" id="finalize_plan">Click to Finalize Plan</button>
			{%else%}<span style="font-size: 1.25em; border : 0.2em solid red; padding:0.25em">This Plan is Finalized</span>{%endif%}
		</div>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; align-items:center; padding-top:0.1em">
		<div class="cols" style="text-align:right; width:25%;">
			<b>Plan Developed at:</b>
		</div>
		<div class="cols" style="width:20%; padding-left:0.5em">
			<b>{{plan.school_develop}}</b>
		</div>
		<div class="cols" style="text-align:right; width:15%;">
			<b>Plan Tier:</b>
		</div>
		<div class="cols" style=" width:20%; padding-left: 0.5em">
			<b>{{plan.intervention_level}}</b>
		</div>
		<div class="cols" style="text-align:left; width:20%;">
			<input type="checkbox" class="finalize" name="active" id="active" {%if plan.active == True %}checked{%endif%}/> &thinsp;Active Plan &emsp;
		</div>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; align-items:center; padding-top:0.35em; padding-bottom:0.75em">
		<div class="cols" style="text-align:right; width:25%;">
			<b>Plan Date:</b>
		</div>
		<div class="cols" style="width:20%; padding-left:0.5em">
			<input type="date" id="plan_date" name="plan_date" class="finalize remove" value="{{plan.plan_date}}" {% if (plan.active== False or plan.plan_final==True) %} style="background-color:gainsboro" readonly {%else%} style="background-color:beige"{%endif%}/>	
		</div>
		<div class="cols" style="text-align:right; width:15%;">
			<b>Lead Intervertionist:</b>
		</div>
		<div class="cols" style=" width:20%; padding-left: 0.5em">
			<input type="text" class="finalize remove" name="teacher" id = "teacher" value="{{plan.teacher}}" {% if (plan.active== False or plan.plan_final==True) %} style="background-color:gainsboro; min-width:105px;" readonly{%else%} style="background-color:beige; min-width:105px;"{%endif%}/>
		</div>
	</div>	
</div>

<div class="container" style="width:95%; max-width: 1700px; min-width:1100px; padding-top:1em">
  <ul class="nav nav-pills center-pills" style="display:flex; justify-content:center">
    <a class="tab" href="#"><li id="plans_tab" style="border: 2px solid; padding-left:2px; padding-right:2px; width:200px; text-align:center; font-size:150%" class="active"><b>&nbsp;Plan Info&nbsp;</b></li>
    <a class="tab" href="#"><li id="progress_monitoring" style="border: 2px solid; padding-left:2px; padding-right:2px; width:200px; text-align:center; font-size:150%"> &nbsp;<b>Progress Monitoring&nbsp;</b></li></a>
    <a class="tab" href="#"><li id="graph" style="border: 2px solid; padding-left:2px; padding-right:2px; width:200px; text-align:center; font-size:150%"> &nbsp;<b>Graphs&nbsp;</b></li></a>
    <a class="tab" href="#"><li id="fid_form" style="border: 2px solid; padding-left:2px; padding-right:2px; width:200px; text-align:center; font-size:150%"> &nbsp;<b>Fidelity Assessment&nbsp;</b></li></a>
    <!--<a class="tab" href="#"><li id="change" style="border: 2px solid; padding-left:2px; padding-right:2px; width:200px; text-align:center; font-size:150%"> &nbsp;<b>Change History&nbsp;</b></li></a>-->
    </ul><br>
</div>

<div id="plans_info" class="container" style="width:95%; max-width:1700px; min-width:1100px; border: 2px black solid; padding-bottom:1em">
	<div class="columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
		<div class="cols-body" style="width:35%; text-align:right">Area of Intervention:
		</div>
		<div class="cols-body" style="width:30%; padding-left:0.5em">
			<select id= "intervention_area_1" name="intervention_area" class="finalize remove" value="{{plan.intervention_area}}" style="width:100%">
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Excessive fears/phobias and/or worrying'%} selected = selected{%endif%} value="Behavior - Excessive fears/phobias and/or worrying">Behavior - Excessive fears/phobias and/or worrying</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Feelings of sadness'%} selected = selected{%endif%} value="Behavior - Feelings of sadness">Behavior - Feelings of sadness</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Lack of interest in friends and/or school'%} selected = selected{%endif%} value="Behavior - Lack of interest in friends and/or school">Behavior - Lack of interest in friends and/or school</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Non-compliance'%} selected = selected{%endif%} value="Behavior - Non-compliance">Behavior - Non-compliance</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Physical Aggression'%} selected = selected{%endif%} value="Behavior - Physical Aggression">Behavior - Physical Aggression</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Poor social skills'%} selected = selected{%endif%} value="Behavior - Poor social skills">Behavior - Poor social skills</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Verbal Aggression'%} selected = selected{%endif%} value="Behavior - Verbal Aggression">Behavior - Verbal Aggression</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Behavior - Withdrawal'%} selected = selected{%endif%} value="Behavior - Withdrawal">Behavior - Withdrawal</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Language - Phonological Processing'%} selected = selected{%endif%} value="Language - Phonological Processing">Language - Phonological Processing</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Language - Social Interaction'%} selected = selected{%endif%} value="Language - Social Interaction">Language - Social Interaction</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Mathematics Calculation'%} selected = selected{%endif%} value="Mathematics Calculation">Mathematics Calculation</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Mathematics Problem Solving'%} selected = selected{%endif%} value="Mathematics Problem Solving">Mathematics Problem Solving</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Reading - Basic Reading Skills'%} selected = selected{%endif%} value="Reading - Basic Reading Skills">Reading - Basic Reading Skills</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Reading - Reading Fluency Skills'%} selected = selected{%endif%} value="Reading - Reading Fluency Skills">Reading - Reading Fluency Skills</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Listening Comprehension'%} selected = selected{%endif%} value="Listening Comprehension">Listening Comprehension</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Oral Expression'%} selected = selected{%endif%} value="Oral Expression">Oral Expression</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Reading Comprehension'%} selected = selected{%endif%} value="Reading Comprehension">Reading Comprehension</option>
				<option class="area" {% if (plan.active== False or plan.plan_final==True) %}disabled{% endif %} {%if plan.intervention_area=='Written Expression'%} selected = selected{%endif%} value="Written Expression">Written Expression</option>
			</select>
		</div>
		<div class="cols-body" style="width:35%"></div>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
		<div class="cols-body" style="width:50%">Student's Current Levels and Baseline Information
		</div>
		<div class="cols-body" style="width:50%;padding-left:1em">Student Expectations from Intervention 
		</div>
	</div>	
	<div class="columns" style="display:flex; justify-content:flex-start; padding: 0.5em 0em">
		<div class="cols-body" style="width:50%">
		 <textarea class="finalize remove" name="current_level" style="background-color:beige; width: 100%" rows="6" {% if plan.active== False or plan.plan_final==True %}readonly{% endif %}>{%if plan.current_level%}{{plan.current_level}}{%endif%}</textarea>
		</div>
		<div class="cols-body" style="width:50%;padding-left:1em"> 
		 <textarea class="finalize remove" name="expectation" style="background-color:beige; width: 100%" rows="6" {% if plan.active== False or plan.plan_final==True %}readonly{% endif %}>{%if plan.expectation%}{{plan.expectation}}{%endif%}</textarea>
		</div>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; padding-bottom: 0.5em">
		<div class="cols-body" style="width:50%">
			Intervention Strategies
		</div>
		<div class="cols-body" style="width:50%; text-align:center">
			Intervention Metrics
		</div>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; align-items:flex-start; padding-bottom: 0.5em">
		<div class="cols-body" style="width:50%">
			<div class="mini-container" style="width:100%">
				<div class="mini-columns" style="display:flex; justify-content:flex-start;">
					<div class="mini-cols" style="width:100%">
						<select class="mult finalize remove_select" id="strategies_select" name="strategies_select" style="background-color:beige; width:100%" {% if (plan.active== False or plan.plan_final==True) %}{%else%}multiple{%endif%} {%if plan.active==False%}readonly{%endif%}>
							{% if (plan.active== False or plan.plan_final==True) %}<option disabled>--Plan is finalized or inactive</option>{%else%}
							{%for strategy in strategies%}{%set chosen_list=plan.strategies.split(',')%}
								<option class="strategies" value="{{strategy.__dict__['strategy']}}" {%if strategy.__dict__['strategy'] in chosen_list|trim %}selected{%endif%}>{{strategy.__dict__['strategy']}}</option>
										{%endfor%}{%endif%}
						</select>
					</div>
				</div>
				<div class="mini-columns" style="display:flex; justify-content:flex-start; margin-top:1em">
					<div class="mini-cols" style="width:20%">
						<input type= "checkbox" name="other_strategy_check" class="finalize remove_check" id="other_strategy_check" {%if plan.other_strategy_check==True%}checked{%endif%}/> &thinsp; Other Strategies &ensp;
					</div>
					<div class="mini-cols" style="width:80%"><input type= "text" name="other_strategy" class="finalize remove" id ="other_strategy" {%if plan.active==False or plan.plan_final==True or plan.other_strategy_check==False%}style="width:100%; background-color:gainsboro" readonly{%else%}style="width:100%; background-color:beige"{%endif%} {%if plan.other_strategy%}value="{{plan.other_strategy}}"{%endif%}/>
					</div>
				</div>
				<div class="mini-columns" style="display:flex; justify-content:flex-start; margin-top:1em">
					<div class="mini-cols">
						Current Chosen Strategies
					</div>
				</div>
				<div class="mini-columns" style="display:flex; justify-content:flex-start; margin-top:0.25em">
					<div class="mini-cols" style="width:100%">
						<textarea id="current_strategies" class="finalize remove" name="strategies" style="background-color:gainsboro; width:100%" rows="2" readonly>{%if plan.strategies%}{{plan.strategies}}{%endif%}</textarea>
					</div>
				</div>
			</div>
		</div>
		<div class="cols-body" style="width:50%;padding-left:1em;">
			<div class="mini-container" style="width:100%">
			 	<div class="mini-columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
					<div class="mini-cols" style="width:40%; text-align:right">
						Days per week
					</div>
					<div class="mini-cols" style="width:60%; padding-left: 0.5em">
						<select class="finalize remove_select" name="days_per_week" value="{{plan.days_per_week}}" style="background-color:beige; width:100%; height:25px">
							<option disabled {%if plan.days_per_week is none%}selected{%endif%}>--# of Days per Week</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.days_per_week == 1%}selected{%endif%} value=1>1</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.days_per_week == 2%}selected{%endif%} value=2>2</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.days_per_week == 3%}selected{%endif%} value=3>3</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.days_per_week == 4%}selected{%endif%} value=4>4</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.days_per_week == 5%}selected{%endif%} value=5>5</option>
						</select>
					</div>
				</div>
			 	<div class="mini-columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
					<div class="mini-cols" style="width:40%; text-align:right">
						Minimum # of Minutes per session
					</div>
					<div class="mini-cols" style="width:60%; padding-left: 0.5em">
						<select class="finalize remove_select" name="minutes_per_session" value="{{plan.minutes_per_session}}" style="background-color:beige; width:100%; height:25px">
						<option disabled {% if plan.minutes_per_session is none%}selected{%endif%}>--# of Minutes per session</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 5%}selected{%endif%} value=5>5</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 10%}selected{%endif%} value=10>10</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 15%}selected{%endif%} value=15>15</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 20%}selected{%endif%} value=20>20</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 25%}selected{%endif%} value=25>25</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 30%}selected{%endif%} value=30>30</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 35%}selected{%endif%} value=35>35</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 40%}selected{%endif%} value=40>40</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 45%}selected{%endif%} value=45>45</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 50%}selected{%endif%} value=50>50</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 55%}selected{%endif%} value=55>55</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.minutes_per_session == 60%}selected{%endif%} value=60>60</option>
						</select>
					</div>
				</div>
			 
				<div class="mini-columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
					<div class="mini-cols" style="width:40%; text-align:right">
						Maximum # of Students in group
					</div>
					<div class="mini-cols" style="width:60%; padding-left: 0.5em">
						<select class="finalize remove_select" name="students_in_group" value="{{plan.students_in_group}}" style="background-color:beige; width:100%; height:25px">
							<option disabled {% if plan.students_in_group is none%}selected{%endif%}>--# of Students in Group</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 1%}selected{%endif%} value=1>1</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 2%}selected{%endif%} value=2>2</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 3%}selected{%endif%} value=3>3</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 4%}selected{%endif%} value=4>4</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 5%}selected{%endif%} value=5>5</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 6%}selected{%endif%} value=6>6</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 7%}selected{%endif%} value=7>7</option>
							<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {% if plan.students_in_group == 8%}selected{%endif%} value=8>8</option>
						</select>	
					</div>
				</div>
			</div>
		</div>
	</div>
			<!--<div class="mini-columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
			   <div class="col" style="width:40%; text-align:right">Person responsible
			   </div>
			   <div class="col" style="width:60%; padding-left: 0.5em">
				<select class="finalize remove_select" name="person_responsible" value="{{plan.person_responsible}}" style="background-color:beige; width:100%">
					<option disabled {%if plan.person_responsible is none%}selected{%endif%}>--Choose Person</option>
					<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.person_responsible=='Paraprofessional/Classroom Teacher'%}selected{%endif%} value="Paraprofessional/Classroom Teacher">Paraprofessional/Classroom Teacher</option>
					<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.person_responsible=='Guidance Counselor'%}selected{%endif%} value="Guidance Counselor">Guidance Counselor</option>
				</select>
			   </div>
			 </div>
			<div class="mini-columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
			   <div class="col" style="width:40%; text-align:right">Progress Monitoring Tool
			   </div>
			   <div class="col" style="width:60%; padding-left: 0.5em">
				<select class="finalize remove_select" name="progress_monitoring_tool" value="{{plan.progress_monitoring_tool}}" style="background-color:beige; width:100%">
					<option disabled {%if plan.progress_monitoring_tool is none %}selected{%endif%}>--Choose Tool</option>
					<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.progress_monitoring_tool=='Standards Based Quizzes or Tests'%}selected{%endif%} value="Standards Based Quizzes or Tests">Standards Based Quizzes or Tests</option>
					<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.progress_monitoring_tool=='Observations'%}selected{%endif%} value="Observations">Observations</option>
				</select>
			   </div>
			 </div>
			<div class="mini-columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
			   <div class="col" style="width:40%; text-align:right">Monitoring Frequency
			   </div>
			   <div class="col" style="width:60%; padding-left: 0.5em">
				<select class="finalize remove_select" name="frequency" value="{{plan.frequency}}" style="background-color:beige; width:100%">
					<option disabled {%if plan.frequency is none%}selected{%endif%}>--Choose Frequency</option>
					<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.frequency=='Weekly'%}selected{%endif%} value="Weekly">Weekly</option>
					<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.frequency=='Biweekly'%}selected{%endif%} value="Biweekly">Biweekly</option>
					<option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.frequency=='Monthly'%}selected{%endif%} value="Monthly">Monthly</option>
				</select>
			   </div>
			 </div>
		</div>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
		<div class="col" style="width:18%; text-align:right">Who will provide support for the plan?
		</div>	
		<div class="col" style="width:32%; padding-left:1em">
			<select name="who_support_plan" class="finalize remove_select" value="{{plan.who_support_plan}}" style="background-color:beige; width: 100%">
			  <option disabled {%if plan.who_support_plan is none%}selected{%endif%}>--Choose support option</option>
			  <option {% if plan.active== False or plan.plan_final==True %}disabled{% endif %} {%if plan.who_support_plan=='ILC and Grade Level Team'%}selected{%endif%} value="ILC and Grade Level Team">ILC and Grade Level Team</option>
			</select>
		</div>
		<div class="col" style="width:50%"></div>
	</div>-->

	<div class="columns" style="display:flex; justify-content:flex-start; padding-top:1.25em">
		<!--<div class="cols-body" style="width:18%; text-align:right">Anticipated Review Date</div>
			<div class="cols-body" style="width:15%; padding-left:1em"><input type="date" class="finalize remove" name="anticipated_review_date" value="{{plan.anticipated_review_date}}" style="background-color:beige; width:100%" {% if (plan.active== False or plan.plan_final==True) %}readonly{%endif%}/>
		</div>-->
		<div class="cols-body" style="width:22%; text-align:right">
			Date Graphs Shared with Parent
		</div>
		<div class="cols-body" style="width:15%; padding-left:1em">
			<input type="date" class="finalize remove" name="graph_share" value="{{plan.graph_share}}" style="background-color:beige; width:90%" {% if (plan.active== False) %}readonly{%endif%}/>
		</div>	
		<div class="cols-body" style="width:26%; text-align:center">Review Completed&ensp; 
			<input type="checkbox" id="rev_checkbox" name="rev_complete" {%if plan.rev_complete%}checked{% endif %} class="finalize remove_check"/>&ensp;on&thinsp;
			<input type="date" id="rev_date" class="finalize remove" name="rev_completed" {%if plan.rev_complete%}value="{{plan.rev_completed}}" style="background-color:beige"{%else%}readonly style="background-color:gainsboro"{%endif%}/>
		</div>
		<div class="cols-body" style="width:29%; text-align:right">
			At least one Fidelity Assessment Completed?&ensp; {%if plan.fid_complete%}Yes{%else%}<span style="color:red">No</span>{%endif%}
			<!--<input type="checkbox" id="fid_checkbox" name="fid_complete" {%if plan.fid_complete%}checked{% endif %} class="finalize remove_check"/>&ensp;on&thinsp;
			<input type="date" id="fid_date" class="finalize remove" name="fid_completed" {%if plan.fid_complete%}value="{{plan.fid_completed}}" style="background-color:beige"{%else%}readonly style="background-color:gainsboro"{%endif%}/>-->
		</div>
	</div>
</div>
</form>
	<!--<div class="columns" style="display:flex; justify-content:flex-start; padding-top:0.5em">
		<div class="cols-body" style="width:18%; text-align:right">
			Anticipated Fidelity Assessment
		</div>
			<div class="cols-body" style="width:32%; padding-left:1em"><input type="date" class="finalize remove" name="anticipated_fidelity_assessment" value="{{plan.anticipated_fidelity_assessment}}" style="background-color:beige; width:100%" {% if (plan.active== False or plan.plan_final==True) %}readonly{%endif%}/>
		</div>	
		
	</div>-->

<style>table.tablesorter tbody tr.normal-row td {
background: #d3d3d3;
  color: #000000;
}
table.tablesorter tbody tr.alt-row td {
background: #F0FFF0;
  color: #000000;
}
table th,td{height:50px}</style>

<script>
$(function() {
  $("#test_table").tablesorter({
    
    widgets: ["zebra"],
    
    widgetOptions : {
      zebra : [ "normal-row", "alt-row" ]}
    });
	
});
</script>

<style>
.load input{
		width: 90%;}
</style>


<div id="progress_monitoring_info" class="container" style="width:95%; max-width:1700px; min-width:1500px; border: 2px black solid; padding-bottom:1em; display:none">
	<div class="columns" style="display:flex; justify-content:flex-start; padding: 0.5em 0em">
		<div class="cols-body" style="width:30%; text-align:right">
		Test Type &ensp;
			<select name="test_type" class="finalize remove_select" form="student_plan_info" value="{{plan.test_type}}" style="background-color:beige; width: 80%">
			  <option disabled {%if plan.test_type is none%}selected{%endif%}>--Choose test type</option>
			  <option {% if plan.active== False %}disabled{% endif %} {%if plan.test_type=='Dibels Fluency Probes'%}selected{%endif%} value="Dibels Fluency Probes">Dibels Fluency Probes</option>
			  <option {% if plan.active== False %}disabled{% endif %} {%if plan.test_type=='Math Computation Exams'%}selected{%endif%} value="Math Computation Exams">Math Computation Exams</option>
			  <option {% if plan.active== False %}disabled{% endif %} {%if plan.test_type=='Reading Comprehension Assessments'%}selected{%endif%} value="Reading Comprehension Assessments">Reading Comprehension Assessments</option>
			</select>
		</div>
		<div class="cols-body" style="width:35%; text-align:left">
		&ensp; Score Type &ensp;
			<select name="score_type" class="finalize remove_select" form="student_plan_info" value="{{plan.score_type}}" style="background-color:beige; width: 80%">
			  <option disabled {%if plan.score_type is none%}selected{%endif%}>--Choose score type</option>
			  <option {% if plan.active== False %}disabled{% endif %} {%if plan.score_type=='Score'%}selected{%endif%} value="Score">Score</option>
			  <option {% if plan.active== False %}disabled{% endif %} {%if plan.score_type=='Percent'%}selected{%endif%} value="Percent">Percent</option>
			</select>
		</div>
		
		<div class="cols-body" style="width:30%; text-align:center">
		{%if tests is none and (plan.active ==True and student.status in ['Active', 'Referred', 'Staffed', 'Staffed-Active']) %}<button onclick="window.location.href='/RTI/Build_Plan/{{student.student_name}}/{{student.student_id}}/{{plan.id}}'" class="btn btn-md btn-secondary" id="plan_build">Build Testing Plan</button>{%endif%}
		{%if tests is not none and (plan.active ==True)%}<button class="btn btn-md btn-secondary" id="new_test">Add New Test Row</button>{%endif%}
		{%if plan.active==False%}This plan can not be altered. Plan must be active to edit monitoring plan. {%endif%}
		</div>	
	</div>

	<div class="columns" style="display:flex; justify-content:flex-start; padding: 0.5em 0em">
		<div class="cols-table" style="width:5%"></div>
		<div class="cols-table" style="width:90%">
			<table id="test_table" class="table tablesorter table-striped table-bordered table-hover" border="1">
				<thead>
					<tr>
						<th scope="col" style="width:9%; text-align:center; font-size:125%; background-color: darkblue; color:white">Edit/<br>Save</th>
						<th scope="col" style="width:14%; text-align:center; font-size:125%; background-color: darkblue; color:white">Date</th>
						<th scope="col" style="width:14%; text-align:center; font-size:125%; background-color: darkblue; color:white">Score</th>
						<th scope="col" style="width:14%; text-align:center; font-size:125%; background-color: darkblue; color:white"><input type="text" class="finalize remove" name="peer_label" form="student_plan_info" value="{{plan.peer_label}}" {%if plan.active==False%} style="background-color:gainsboro; width:90%" readonly{%else%} style="background-color:beige; width:90%"{%endif%}/></th>
						<th scope="col" style="width:13%; text-align:center; font-size:125%; background-color: darkblue; color:white">Goal</th>
						<th scope="col" style="width:9%; text-align:center; font-size:125%; background-color: darkblue; color:white">Created By</th>
						<th scope="col" style="width:9%; text-align:center; font-size:125%; background-color: darkblue; color:white">Created Date</th>
						<th scope="col" style="width:9%; text-align:center; font-size:125%; background-color: darkblue; color:white">Updated By</th>
						<th scope="col" style="width:9%; text-align:center; font-size:125%; background-color: darkblue; color:white">Updated Date</th>
					</tr>
				</thead>
				<tbody class="test_body"> {%if tests%}{% for test in  tests %}
					<tr>
						<td style="text-align:center">{%if plan.active==True%}<button class="btn btn-sm btn-primary edit_test" id="test_edit_{{test.__dict__['id']}}" >Edit</button>
						<button class="btn btn-sm btn-success save_test" id="test_save_{{test.__dict__['id']}}" style="display:none">Save</button>&ensp;{%endif%}
						<button class="btn btn-sm btn-secondary cancel_test" id="test_cancel_{{test.__dict__['id']}}" style="display:none">Cancel</button></td>
						<td style="text-align:center; font-size:125%" class ="table_test" id="test_test_date_{{test.__dict__['id']}}">
						<span class="load load_{{test.__dict__['id']}} test_date" id ="load_test_date_{{test.__dict__['id']}}">{{test.__dict__['test_date']}}</span>
						<span class="load load_{{test.__dict__['id']}}" id="change_test_date_{{test.__dict__['id']}}" style="display:none"><input type="date" id="input_test_date_{{test.__dict__['id']}}" /></span></td>
						<td style="text-align:center; font-size:125%" class ="table_test" id="test_score_{{test.__dict__['id']}}">
						<span class="load load_{{test.__dict__['id']}} test_score" id ="load_score_{{test.__dict__['id']}}">{%if test.__dict__['score'] is not none%}{{test.__dict__['score']}}{%endif%}</span>
							<span class="load load_{{test.__dict__['id']}}" id="change_score_{{test.__dict__['id']}}" style="display:none"><input type="text" id="input_score_{{test.__dict__['id']}}" /></span></td>
						<td style="text-align:center; font-size:125%" class ="table_test" id="test_peer_score_{{test.__dict__['id']}}">
						<span class="load load_{{test.__dict__['id']}} peer_score" id ="load_peer_score_{{test.__dict__['id']}}">{%if test.__dict__['peer_score'] is not none%}{{test.__dict__['peer_score']}}{%endif%}</span>
						<span class="load load_{{test.__dict__['id']}}" id="change_peer_score_{{test.__dict__['id']}}" style="display:none"><input type="text" id="input_peer_score_{{test.__dict__['id']}}" /></span></td>
						<td style="text-align:center; font-size:125%" class ="table_test" id="test_goal_{{test.__dict__['id']}}">
						<span class="load load_{{test.__dict__['id']}} goal_score" id ="load_goal_{{test.__dict__['id']}}">{%if test.__dict__['goal'] is not none%}{{test.__dict__['goal']}}{%endif%}</span>
						<span class="load load_{{test.__dict__['id']}}" id="change_goal_{{test.__dict__['id']}}" style="display:none"><input type="text" id="input_goal_{{test.__dict__['id']}}" /></span></td>
						<td style="text-align:center; font-size:125%" class="table_test person_create" id="test_person_create_{{test.__dict__['id']}}">{{test.__dict__['person_create']}}</td>
						<td style="text-align:center; font-size:125%" class="table_test date_create" id="test_date_create_{{test.__dict__['id']}}">{{test.__dict__['date_create']}}</td>
						<td style="text-align:center; font-size:125%" class = "table_test person_modify" id="test_person_modify_{{test.__dict__['id']}}">{{test.__dict__['person_modify']}}</td>
						<td style="text-align:center; font-size:125%" class="table_test date_modify" id="test_date_modify_{{test.__dict__['id']}}">{{test.__dict__['date_modify']}}</td>	
					</tr>
						{% endfor %}{%endif%}
				</tbody>
			</table>
		</div>
		<div class="cols-table" style="width:5%"></div>
	</div>	
</div>


<div id="graph_info" class="container" style="width:95%; max-width:1700px; min-width:1100px; border: 2px black solid; padding-bottom:1em; display:none">
{%if image %}<img id ="graph_image" src="{{image}}" style="width:95%">{%endif%}
<img id = "graph_image_hidden" src="" style="width:95%; display:none">
</div>

<script>
$(function(){var d = new Date();
        $("#graph_image").attr("src", "{{image}}?"+d.getTime());
})
</script>

<div id="change_info" class="container" style="width:95%; max-width:1500px; min-width:980px; border: 2px black solid; padding-bottom:1em; display:none">
<p style="text-align:center; font-size:150%"><br><br>
		Created By: &ensp;{{plan.person_create}} &emsp;&ensp;
		Date Created:&ensp; {{plan.date_create}}<br><br>
		Updated By:&ensp; {{plan.person_modify}}&emsp;&ensp;
		Date Updated:&ensp; {{plan.date_modify}}<br></p>

<div style="visibility:hidden"><div id="table_print_div"></div></div>
</div>

<div id="fid_form_info" class="container" style="width:95%; max-width:1700px; min-width:1500px; padding-bottom:1em; border: 2px solid black; display:none">
	<div class="columns" style="margin:auto; padding: 0.5em 0em; text-align:center">
		<h1 style="text-align:center"><u><b>Intervention Fidelity Assessments</u></b></h1>
	</div>
	<div class="columns" style="display:flex; justify-content:flex-start; margin-top:0.5em; padding-bottom:0.5em; font-size:115%; align-items:center">
		<div class="cols" style="width:25%"></div>
		<div class="cols-body" style="width:50%; text-align:center">Observations of intervention implementation should be completed at least once during Tier 2 and once during Tier 3.</div>
		<div class="cols-body" style="width:25%; padding-left:3em; text-align:center">{%if plan.plan_final==True and plan.active==True%}
			<button class="btn btn-md btn-primary" style="text-align:center; width:70%" id="new_fidelity_check">New Fidelity<br>Assessment</button>
			{%else%}Only active and finalized plans can have new obsevations
			{%endif%}
		</div>
	</div>
	<div id="fidelity_table_div" class="columns" style="display:flex; justify-content:flex-start; margin-top:1em">
		<div class="cols" style="width:7.5%"></div>
		<div style="display:none; text-align:center; width:80%; margin-top:6em; padding-top:6em; padding-left:50em" id="fidelity_loader">
			<img style="height:4em" src="/static/images/loading.gif">
		</div>
		<div class="cols-body" style="width:85%;">
			<table id="fidelity_table" style="width:100%" class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th style="width:13%; text-align:center; background-color:darkblue; color:white; font-size:115%">Edit</th>
						<th style="width:15%; text-align:center; background-color:darkblue; color:white; font-size:115%">Fidelity Check Date</th>
						<th style="width:15%; text-align:center; background-color:darkblue; color:white; font-size:115%">Observer Name/Title</th>
						<th style="width:15%; text-align:center; background-color:darkblue; color:white; font-size:115%">Strategy Observed</th>
						<th style="width:10%; text-align:center; background-color:darkblue; color:white; font-size:115%">Fidelity Observed?</th>
						<th style="width:31%; text-align:center; background-color:darkblue; color:white; font-size:115%">Comments</th>
					</tr>
				</thead>
				<tbody class="fidelity_body"> {% for assessment in assessments %}
					<tr class="fidelity_row_{{assessment.fidelity_id}}">
						<td style="text-align:center">
							<button class="btn btn-md btn-info edit_fidelity">Edit</button><br><br>
						</td>
						<td style="text-align:center; font-size:105%">
							{%if assessment.fidelity_observe_date.month<10 %}0{{assessment.fidelity_observe_date.month}}-{%else%}{{assessment.fidelity_observe_date.month}}-{%endif%}
							{%if assessment.fidelity_observe_date.day<10 %}0{{assessment.fidelity_observe_date.day}}-{%else%}{{assessment.fidelity_observe_date.day}}-{%endif%}
							{{assessment.fidelity_observe_date.year}}
						</td>
						<td style="text-align:center; font-size:105%">
							{{assessment.fidelity_observe_name}}
						</td>
						<td style="text-align:center; font-size:105%">
							{{assessment.fidelity_strategy}}
						</td>
						<td style="text-align:center; font-size:105%">
							{%if assessment.fidelity_question_one=='Yes' and assessment.fidelity_question_two=='Yes' and assessment.fidelity_question_three=='Yes' %}
							Yes
							{%else%}
							<span style="color:red">No</span>
							{%endif%}
						</td>
						<td style="text-align:center; font-size:105%">
							<p style= "max-height:300px; overflow:auto">{{assessment.fidelity_comment}}</p>
						</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
		<div class="cols" style="width:7.5%"></div>
	</div>
		<!--
		<div class="columns" style="display:flex; justify-content:flex-start; margin-top:0.5em; padding-bottom:0.5em; font-size:115%; align-items:center">
			<div class="cols" style="width:30%"></div>
			<div class="cols-body" style="width:40%; text-align:center">Observations of intervention implementation should be completed at least once during Tier 2 and once during Tier 3. Use the guideline below when observing intervention implementation to assess fidelity.</div>
			<div class="cols" style="width:30%; padding-left:0.75em"><button class="btn btn-lg btn-primary" style="text-align:center; width:60%" id="print_fid_assess">Print Fidelity<br>Assessment</button></div>
		</div>
	</div>
	<div class='container' style='width: 65%; padding-top:0.25em; border: 2px solid black; max-width:1500px; min-width:1080px'>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right">Student's Legal Name:&ensp;</div>
		<div class="cols-body" style="width:15%">{%set namelist=student.student_name.split(',')%}<u>{{namelist[1].strip()}} {{namelist[0]}}</u></div>
		<div class="cols-body" style="width:25%"></div>
		<div class="cols-body" style="width:15%; text-align:right">Date of Birth:&ensp;</div>
		<div class="cols-body" style="width:10%"><u>{{student.date_birth}}</u></div>
		<div class="cols-body" style="width:10%"></div>
		
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; font-size:125%; padding-top:0.5em; padding-left:0.5em">
		<div class="cols-body" style="width:20%; text-align:right">School:&ensp;</div>
		<div class="cols-body" style="width:15%"><u>{{student.school}}</u></div>
		<div class="cols-body" style="width:30%; text-align:center">Teacher:&ensp;<u>{{plan.teacher}}</u></div>
		<div class="cols-body" style="width:10%; text-align:right">Grade:&ensp;<u></div>
		<div class="cols-body" style="width:10%">{%if student.grade==0%}K{%else%}{{student.grade}}{%endif%}</u></div>
		<div class="cols-body" style="width:10%"></div>
		</div>
	</div>	
	<div class='container' style='width:65%; margin-top:1em; padding-top:0.25em; padding-bottom:0.25em; border: 2px solid black; max-width:1500px; min-width:1080px'>
		<div class="columns" style="margin:auto; text-align:center">
			<h1 style="text-align:center; font-size:125%"><u><b>Fidelity Assessment</u></b></h1>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right">Observer's name/title:&ensp;</div>
		<div class="cols-body" style="width:40%"><input type="text" class="finalize observe observe_text remove" name="observe_name" form="student_plan_info" style="width:100%; background-color:beige" {%if plan.observe_name%}value="{{plan.observe_name}}"{%endif%}/></div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; margin-top:0.25em; padding-left:0.5em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right">Observer's signature:&ensp;</div>
		<div class="cols-body" style="width:40%"><b>___________________________________________</b></div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; margin-top:0.5em; padding-left:0.5em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right">Intervention Area:&ensp;</div>
		<div class="cols-body" style="width:40%"><input type="text" style="width:100%; background-color:gainsboro" readonly value="{{plan.intervention_area}}"/></div>
		<div class="cols-body" style="width:15%; text-align:right">Tier:&ensp;</div>
		<div class="cols-body" style="width:10%"><input type="text" style="width:100%; background-color:gainsboro" readonly value="{{plan.intervention_level}}"/></div>
		</div>
		{%set check_behavior=plan.intervention_area.split()%}{%if check_behavior=="Behavior"%}
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right">Strategy Observed:&ensp;</div>
		<div class="cols-body" style="width:40%"><input type="text" class="finalize observe observe_text remove" form="student_plan_info" name="observe_strategy" style="width:100%; background-color:beige"></div>
		</div>
		{%else%}
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right">Strategy Observed:&ensp;</div>
		<div class="cols-body" style="width:40%"><select class="finalize observe observe_select remove" form="student_plan_info" name="observe_strategy" style="width:100%; background-color:beige; height:120%">
							<option></option>
							{%if plan.strategies%}{%set strat_list=plan.strategies.split(',')%}
							{%for strategy_raw in strat_list%}{% set strategy = strategy_raw.strip()%}
							<option value="{{strategy}}" {%if plan.observe_strategy==strategy%}selected{%endif%}>{{strategy}}</option>
							{%endfor%}
							{%endif%}
							{%if plan.other_strategy and plan.other_strategy.strip()!=''%}<option value="{{plan.other_strategy}}" {%if plan.observe_strategy==plan.other_strategy%}selected{%endif%}>{{plan.other_strategy}}</option>{%endif%}
						</select></div>
		</div>{%endif%}
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right">Observation date:&ensp;</div>
		<div class="cols-body" style="width:40%"><input id="observe_date" type="date" class="finalize observe" name="observe_date" form="student_plan_info" style="width:100%; background-color:beige" {%if plan.observe_date%}value="{{plan.observe_date}}"{%endif%}/></div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right"><u><b>Fidelity Questions:</u></b>&ensp;</div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:125%">
		<div class="cols-body" style="width:75%">Was the intervention being implemented as stated on the intervention plan?</div>
		<div class="cols-body" style="width:10%"><select class="fid_question finalize observe remove" form="student_plan_info" name="fid_question_first" style="width:100%; background-color:beige">
							<option></option>
							<option value="Yes" {%if plan.fid_question_first=='Yes'%}selected{%endif%}>Yes</option>
							<option value="No" {%if plan.fid_question_first=='No'%}selected{%endif%}>No</option>
						</select></div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:125%">
		<div class="cols-body" style="width:75%">Was the stated strategy/program being utilized appropriately?</div>
		<div class="cols-body" style="width:10%"><select class="fid_question finalize observe remove" form="student_plan_info" name="fid_question_2" style="width:100%; background-color:beige">
							<option></option>
							<option value="Yes" {%if plan.fid_question_2=='Yes'%}selected{%endif%}>Yes</option>
							<option value="No" {%if plan.fid_question_2=='No'%}selected{%endif%}>No</option>
						</select></div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:125%">
		<div class="cols-body" style="width:75%">Was the student engaged in the activity?</div>
		<div class="cols-body" style="width:10%"><select class="fid_question finalize observe remove" form="student_plan_info" name="fid_question_3" style="width:100%; background-color:beige">
							<option></option>
							<option value="Yes" {%if plan.fid_question_3=='Yes'%}selected{%endif%}>Yes</option>
							<option value="No" {%if plan.fid_question_3=='No'%}selected{%endif%}>No</option>
						</select></div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:125%">
		<div class="cols-body" style="width:20%; text-align:right"><u><b>Comments:</u></b>&ensp;</div>
		</div>
		<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:125%">
		<div class="cols-body" style="width:85%; text-align:right">
			<textarea class="finalize remove" name="observe_comment" form="student_plan_info" style="background-color:beige; width: 100%" rows="4">{%if plan.observe_comment%}{{plan.observe_comment}}{%endif%}</textarea></div>
		</div>
	</div>-->

	<div style="display:none"><div id="fid_print_div"></div></div>
</div>


<script>
       $('.tab').on('click',function(event){
          event.preventDefault();
          var x = $('.tab');
          x.children('li').removeClass('active');
          $(this).children('li').addClass('active');
       if ($('#plans_tab').hasClass('active')){
        $('#plans_info').show();
      }
      else{
        $('#plans_info').hide()
      }
      if ($('#progress_monitoring').hasClass('active')){
        $('#progress_monitoring_info').show();
      }
      else{
        $('#progress_monitoring_info').hide();
      }
      if ($('#graph').hasClass('active')){
        $('#graph_info').show();
      }
      else{
        $('#graph_info').hide();
      }
      if ($('#change').hasClass('active')){
        $('#change_info').show();
      }
      else{
        $('#change_info').hide();
      }
      if ($('#fid_form').hasClass('active')){
        $('#fid_form_info').show();
      }
      else{
        $('#fid_form_info').hide();
      }
        })


$(".finalize").change(function(){
	$('#save_plan').css({"border-color":"red", "border-width": "4px"});
	if (!($('#save_plan').hasClass("unsaved"))){$('#save_plan').addClass("unsaved");}})

{%if plan.plan_final==False%}$('#other_strategy_check').on('change', function(){
		if($(this).prop('checked')){$('#other_strategy').css("background-color", "beige"); $('#other_strategy').prop("readonly", false);}
		else{$('#other_strategy').css("background-color", "gainsboro"); $('#other_strategy').prop("readonly", true);
			if($('#other_strategy').val() && $('#other_strategy').val()!=""){alert('If other strategy text is saved without the checkbox being checked, then the other strategy will be cleared from the database')}}
})	
{%endif%}
function remove_save(){
var t = $('.fid_question');
var y = $('#fid_checkbox');
var z = $('.observe_text');
var w= $('.observe_select');
var all_answered=true;
$.each(t, function(index, value){
		if(value.value!='Yes' && value.value!='No'){all_answered=false;}
		});
$.each(z, function(index, value){
		if(!value.value || value.value==''){all_answered=false;}
		});
if(w.length>0){if(!w[0].value || w[0].value.trim()==''){all_answered=false;}};
	
if(!$('#observe_date').val() || $('#observe_date').val()==''){all_answered=false;}

if(all_answered){$("#fid_allow").val(1);}
else{$("#fid_allow").val(0);}

if((($('#rev_checkbox').prop("checked")== true && $('#rev_date').val()=="") || ($('#fid_checkbox').prop("checked")== true && $('#fid_date').val()=="")) && (all_answered==false && y.prop("checked")==true)){
	var x = confirm("You have a check in Review Completed or Fidelity Assessment Completed with no corresponding date. If you proceed to save, then the corresponding checkbox will be cleared. You sure you want to continue?")
	if(!x){event.preventDefault();}
	else{var valid_fid = confirm("Not all fields in fidelity assessment tab are completed, if you proceed to save, then the fidelity assessment completed checkbox and date will be cleared. You sure you  want to continue?");
		if(!valid_fid){event.preventDefault();}
		else{$('#save_plan').removeClass("unsaved");}}}
else if(($('#rev_checkbox').prop("checked")== true && $('#rev_date').val()=="") || ($('#fid_checkbox').prop("checked")== true && $('#fid_date').val()=="")){
	var x = confirm("You have a check in Review Completed or Fidelity Assessment Completed with no corresponding date. If you proceed to save, then the corresponding checkbox will be cleared. You sure you want to continue?")
	if(!x){event.preventDefault();}
	else{$('#save_plan').removeClass("unsaved");}}
else if(!all_answered && y.prop("checked")){var valid_fid = confirm("Not all fields in fidelity assessment tab are completed, if you proceed to save, then the fidelity assessment completed checkbox and date will be cleared. You sure you  want to continue?");
	if(!valid_fid){event.preventDefault();}
	else{$('#save_plan').removeClass("unsaved");}
	}
else{
$('#save_plan').removeClass("unsaved");}}

window.addEventListener("beforeunload", function(event) {
  if($('#save_plan').hasClass("unsaved")){event.returnValue = confirm("You have unsaved Data. You sure you want to leave?");}
})
  
{% if plan.active== False %}
 $(function() {
    $( ".remove" ).prop( "readonly", true );
  });
$('.remove_check').click(function() {
return false;
});


{% endif %}

{%if plan.plan_final==True%}
$('#other_strategy_check').on('click', function(){
return false;
})
{%endif%}

$('.edit_test').on('click', function(){
	var id=	this.id;
	id=id.split('_')[2];
	var current_test_date = $('#load_test_date_'+id).text()
	var current_score= $('#load_score_'+id).text()
	var current_peer_score = $('#load_peer_score_'+id).text()
	var current_goal= $('#load_goal_'+id).text()
	var month=current_test_date.split('-')[1]
	if (month.length > 2){
			switch(month){
				case 'Jan':
					current_test_date=current_test_date.split('-')[0]+ '-01-'+ current_test_date.split('-')[2]
					break;
				case 'Feb':
					current_test_date=current_test_date.split('-')[0]+ '-02-'+ current_test_date.split('-')[2]
					break;
				case 'Mar':
					current_test_date=current_test_date.split('-')[0]+ '-03-'+ current_test_date.split('-')[2]
					break;
				case 'Apr':
					current_test_date=current_test_date.split('-')[0]+ '-04-'+ current_test_date.split('-')[2]
					break;
				case 'May':
					current_test_date=current_test_date.split('-')[0]+ '-05-'+ current_test_date.split('-')[2]
					break;
				case 'Jun':
					current_test_date=current_test_date.split('-')[0]+ '-06-'+ current_test_date.split('-')[2]
					break;
				case 'Jul':
					current_test_date=current_test_date.split('-')[0]+ '-07-'+ current_test_date.split('-')[2]
					break;
				case 'Aug':
					current_test_date=current_test_date.split('-')[0]+ '-08-'+ current_test_date.split('-')[2]
					break;
				case 'Sep':
					current_test_date=current_test_date.split('-')[0]+ '-09-'+ current_test_date.split('-')[2]
					break;
				case 'Oct':
					current_test_date=current_test_date.split('-')[0]+ '-10-'+ current_test_date.split('-')[2]
					break;
				case 'Nov':
					current_test_date=current_test_date.split('-')[0]+ '-11-'+ current_test_date.split('-')[2]
					break;
				case 'Dec':
					current_test_date=current_test_date.split('-')[0]+ '-12-'+ current_test_date.split('-')[2]
					break;
					}}
	
	$('#test_save_'+ id,).toggle();
	$('#test_cancel_'+ id).toggle();
	$(this).toggle();
	$('.load_'+id).toggle();
	$('#input_test_date_'+id).val(current_test_date);
	$('#input_score_'+id).val(current_score);
	$('#input_peer_score_'+id).val(current_peer_score);
	$('#input_goal_'+id).val(current_goal);		
})

$('.save_test').on('click', function(){
	var id=	this.id;
	id=id.split('_')[2];
	var img_check="";
	{%if image%}img_check = 'Y';{%else%}img_check='N'{%endif%}
	$.ajax({url: '/RTI/Build_Plan/{{student.student_name}}/{{student.student_id}}/{{plan.id}}', data: {test_date : $('#input_test_date_'+id).val(), score : $('#input_score_'+id).val(), peer_score : $('#input_peer_score_'+id).val() , goal : $('#input_goal_'+id).val() , id : id, new_test: 'No', image: img_check},
		method : 'PUT'}).done(
		function(data){if (data.error){alert(""+data.error)}
				else{alert(""+data.success);
				var date_modify_new = data.date_modify.split(",")[1];
				date_modify_new = date_modify_new.trim();
				date_modify_new = date_modify_new.split(" ")[2]+ '-' + date_modify_new.split(" ")[1] +'-' + date_modify_new.split(" ")[0];
				var test_date_new= data.test_date.split(",")[1];
				test_date_new= test_date_new.trim();
				test_date_new= test_date_new.split(" ")[2]+ '-' + test_date_new.split(" ")[1] +'-' + test_date_new.split(" ")[0];
				$('#load_test_date_'+id).text(test_date_new);
				$('#load_score_'+id).text(data.score);
				$('#load_peer_score_'+id).text(data.peer_score);
				$('#load_goal_'+id).text(data.goal);
				$('#test_person_modify_'+id).text(data.person_modify);
				$('#test_date_modify_'+id).text(date_modify_new);
				var d = new Date();
        			$("#graph_image").attr("src", "{{image}}?"+d.getTime());
				$("#graph_image_hidden").attr("src", "/static/images/plot.png?"+d.getTime());
				if (data.switch=='Y'){$("#graph_image_hidden").show();};}
				})

	$('#test_edit_'+ id).toggle();
	$('#test_cancel_'+ id).toggle();
	$(this).toggle();
	$('.load_'+id).toggle();		
})

$('.cancel_test').on('click', function(){
	var id=	this.id;
	id=id.split('_')[2];
	$('#test_edit_'+ id).toggle();
	$('#test_save_'+ id).toggle();
	$(this).toggle();
	$('.load_' +id).toggle()
})

$('#new_test').click(function(){
	
	$.ajax({url: '/RTI/Build_Plan/{{student.student_name}}/{{student.student_id}}/{{plan.id}}', data: {new_test: 'Yes'},
		method : 'PUT'}).done(
		function(data){if (data.error){alert(""+data.error);}
				else{alert(""+data.success);
				var date_modify_new = data.date_modify.split(",")[1];
				date_modify_new = date_modify_new.trim();
				date_modify_new = date_modify_new.split(" ")[2]+ '-' + date_modify_new.split(" ")[1] +'-' + date_modify_new.split(" ")[0];
				var test_date_new= data.test_date.split(",")[1];
				test_date_new= test_date_new.trim();
				test_date_new= test_date_new.split(" ")[2]+ '-' + test_date_new.split(" ")[1] +'-' + test_date_new.split(" ")[0];
				var date_create_new = data.date_create.split(",")[1];
				date_create_new = date_create_new.trim();
				date_create_new = date_create_new.split(" ")[2]+ '-' + date_create_new.split(" ")[1] +'-' + date_create_new.split(" ")[0];
				var table_string="";
				table_string += '<tr><td style="text-align:center"><button class="btn btn-sm btn-primary edit_test_new" id="test_edit_'+ data.id + '">Edit</button>'
										    + '<button class="btn btn-sm btn-success save_test_new" id="test_save_'+ data.id + '" style="display:none">Save</button>'
										    + '<button class="btn btn-sm btn-secondary cancel_test_new" id="test_cancel_'+ data.id + '" style="display:none">Cancel</button></td>'
						       + '<td style="text-align:center; font-size:125%" class ="table_test" id="test_test_date_'+ data.id + '">'
							+ '<span class="load load_'+ data.id+ ' test_date" id ="load_test_date_'+ data.id + '">'+ test_date_new + '</span>'
							+ '<span class="load load_'+ data.id+ '" id="change_test_date_'+ data.id + '" style="display:none"><input type="date" id="input_test_date_'+ data.id + '"/></span></td>'
						       + '<td style="text-align:center; font-size:125%" class ="table_test" id="test_score_'+ data.id + '">'
							 + '<span class="load load_'+ data.id+ ' test_score" id ="load_score_'+ data.id + '"></span>'
							 + '<span class="load load_'+ data.id+ '" id="change_score_'+ data.id + '" style="display:none"><input type="text" id="input_score_'+ data.id + '"/></span></td>'
						       + '<td style="text-align:center; font-size:125%" class ="table_test" id="test_peer_score_'+ data.id + '">'
							 + '<span class="load load_'+ data.id+ ' peer_score" id ="load_peer_score_'+ data.id + '"></span>'
						         + '<span class="load load_'+ data.id+ '" id="change_peer_score_'+ data.id + '" style="display:none"><input type="text" id="input_peer_score_'+ data.id + '"/></span></td>'
						       + '<td style="text-align:center; font-size:125%" class ="table_test" id="test_goal_'+ data.id + '">'
							 + '<span class="load load_'+ data.id+ ' goal_score" id ="load_goal_'+ data.id + '"></span>'
						         + '<span class="load load_'+ data.id+ '" id="change_goal_'+ data.id + '" style="display:none"><input type="text" id="input_goal_'+ data.id + '"/></span></td>'
						       + '<td style="text-align:center; font-size:125%" class="table_test person_create" id="test_person_create_'+ data.id + '">'+ data.person_create + '</td>'
						       + '<td style="text-align:center; font-size:125%" class="table_test date_create" id="test_date_create_'+ data.id + '">'+ date_create_new + '</td>'
						       + '<td style="text-align:center; font-size:125%" class="table_test person_modify" id="test_person_modify_'+ data.id + '">'+ data.person_modify + '</td>'
						       + '<td style="text-align:center; font-size:125%" class="table_test date_modify" id="test_date_modify_'+ data.id + '">'+ date_modify_new + '</td></tr>'			
				$('.test_body').append(table_string);}
				})
})

$('.test_body').on('click', '.edit_test_new', function(){
	var id=	this.id;
	id=id.split('_')[2];
	var current_test_date = $('#load_test_date_'+id).text()
	var current_score= $('#load_score_'+id).text()
	var current_peer_score = $('#load_peer_score_'+id).text()
	var current_goal= $('#load_goal_'+id).text()
	var month=current_test_date.split('-')[1]
	if (month.length > 2){
			switch(month){
				case 'Jan':
					current_test_date=current_test_date.split('-')[0]+ '-01-'+ current_test_date.split('-')[2]
					break;
				case 'Feb':
					current_test_date=current_test_date.split('-')[0]+ '-02-'+ current_test_date.split('-')[2]
					break;
				case 'Mar':
					current_test_date=current_test_date.split('-')[0]+ '-03-'+ current_test_date.split('-')[2]
					break;
				case 'Apr':
					current_test_date=current_test_date.split('-')[0]+ '-04-'+ current_test_date.split('-')[2]
					break;
				case 'May':
					current_test_date=current_test_date.split('-')[0]+ '-05-'+ current_test_date.split('-')[2]
					break;
				case 'Jun':
					current_test_date=current_test_date.split('-')[0]+ '-06-'+ current_test_date.split('-')[2]
					break;
				case 'Jul':
					current_test_date=current_test_date.split('-')[0]+ '-07-'+ current_test_date.split('-')[2]
					break;
				case 'Aug':
					current_test_date=current_test_date.split('-')[0]+ '-08-'+ current_test_date.split('-')[2]
					break;
				case 'Sep':
					current_test_date=current_test_date.split('-')[0]+ '-09-'+ current_test_date.split('-')[2]
					break;
				case 'Oct':
					current_test_date=current_test_date.split('-')[0]+ '-10-'+ current_test_date.split('-')[2]
					break;
				case 'Nov':
					current_test_date=current_test_date.split('-')[0]+ '-11-'+ current_test_date.split('-')[2]
					break;
				case 'Dec':
					current_test_date=current_test_date.split('-')[0]+ '-12-'+ current_test_date.split('-')[2]
					break;
					}}
	
	$('#test_save_'+ id,).toggle();
	$('#test_cancel_'+ id).toggle();
	$(this).toggle();
	$('.load_'+id).toggle();
	$('#input_test_date_'+id).val(current_test_date);
	$('#input_score_'+id).val(current_score);
	$('#input_peer_score_'+id).val(current_peer_score);
	$('#input_goal_'+id).val(current_goal);		
})

$('.test_body').on('click', '.save_test_new', function(){
	var id=	this.id;
	id=id.split('_')[2];
	var img_check="";
	{%if image%}img_check = 'Y';{%else%}img_check='N'{%endif%}
	
	$.ajax({url: '/RTI/Build_Plan/{{student.student_name}}/{{student.student_id}}/{{plan.id}}', data: {test_date : $('#input_test_date_'+id).val(), score : $('#input_score_'+id).val(), peer_score : $('#input_peer_score_'+id).val() , goal : $('#input_goal_'+id).val() , id : id, new_test: 'No', image: img_check},
		method : 'PUT'}).done(
		function(data){if (data.error){alert(""+data.error); $('#test_edit_'+ id).toggle();}
				else{alert(""+data.success);
				var date_modify_new = data.date_modify.split(",")[1];
				date_modify_new = date_modify_new.trim();
				date_modify_new = date_modify_new.split(" ")[2]+ '-' + date_modify_new.split(" ")[1] +'-' + date_modify_new.split(" ")[0];
				var test_date_new= data.test_date.split(",")[1];
				test_date_new= test_date_new.trim();
				test_date_new= test_date_new.split(" ")[2]+ '-' + test_date_new.split(" ")[1] +'-' + test_date_new.split(" ")[0];
				$('#load_test_date_'+id).text(test_date_new);
				$('#load_score_'+id).text(data.score);
				$('#load_peer_score_'+id).text(data.peer_score);
				$('#load_goal_'+id).text(data.goal);
				$('#test_person_modify_'+id).text(data.person_modify);
				$('#test_date_modify_'+id).text(date_modify_new);
				var d = new Date();
        			$("#graph_image").attr("src", "{{image}}?"+d.getTime());
				$('#test_edit_'+ id).toggle();
				$("#graph_image_hidden").attr("src", "/static/images/plot.png?"+d.getTime());
				if (data.switch=='Y'){$("#graph_image_hidden").show();};}
				})
				

				$('#test_cancel_'+ id).toggle();
				$(this).toggle();
				$('.load_'+id).toggle();
			
})

$('.test_body').on('click', '.cancel_test_new', function(){
	var id=	this.id;
	id=id.split('_')[2];
	$('#test_edit_'+ id).toggle();
	$('#test_save_'+ id).toggle();
	$(this).toggle();
	$('.load_' +id).toggle();
})

$('#finalize_plan').on('click', function(){
		event.preventDefault();
		$.ajax({url:'/plan_final/{{student.student_name}}/{{student.student_id}}/{{plan.intervention_area}}/{{plan.id}}',
			data: $('#student_plan_info').serialize(), method:'POST'}).done(
			function(data){ if (data.plan_final == 'N'){alert('Could not finalize plan! Must fill in all fields (outside of fidelity assessment and review dates) in Plan Tab and have plan activated before finalizing!');
									
									return false;}
					else{remove_save();
						location.reload();}
					})
		
		
		
})
      </script>

<script>
	$('#print_plan_sheet').on('click', function(event){
		event.preventDefault();
		var print_string="";
		var test_string="";
		var table_rows=$('.test_body tr');
		var temp_string="";
		var img_elem= document.getElementById("graph_image_hidden");
		var d = new Date();
		$.each(table_rows, function(){temp_string="";
			temp_string+="<tr><td style='text-align:center; font-size:100%'>" + $(this).children().children('.test_date').text() + "</td><td style='text-align:center; font-size:100%'>" + $(this).children().children('.test_score').text() + "</td>";
			temp_string+="<td style='text-align:center; font-size:100%'>" + $(this).children().children('.peer_score').text() + "</td><td style='text-align:center; font-size:100%'>" + $(this).children().children('.goal_score').text() + "</td></tr>";
			test_string+=temp_string;
			});
		print_string += "<div style='text-align: center'><h4>ST. JOHNS COUNTY SCHOOL DISTRICT</h4><h4>Problem Solving/Response to Intervention Team</h4><h4><b><u>Intervention Plan for Academics</b></u></h4></div><div class='container' style='width: 100%'>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start'> <div class= 'cols' style='width:20%; text-align:right'><b><span style= 'font-size:110%'>Plan Date</span></b></div><div class= 'cols' style='width:15%; margin-left:0.5em'><input type='date' style = 'height:25px; width:135px; font-size: 110%'";
		print_string += " value = '" + $('#plan_date').val() + "'/></div><div class = 'cols' style='width:15%; text-align:right'><b><span style= 'font-size:110%'>Tier&nbsp;</span></b><input type='text' style= 'width: 40px; font-size:110%; height:25px' ";
		print_string += " value= '" + {{student.tiers}} + "' /></div><div class='cols' style='width: 15%; text-align: right'><span style='font-size:110%'><b>Status</b>&ensp;</span></div><div class = 'cols' style ='width: 35%'><input type = 'text' style = 'width: 135px; font-size:110%; height:25px' ";
		print_string += " value = '{{student.status}}'/></div></div><div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'> <div class= 'cols' style='width:20%; text-align:right'><b><span style= 'font-size:110%'>Student Name</span></b></div>";
		print_string += " <div class= 'cols' style='width:30%; margin-left:0.5em'><input type='text' style = 'height:25px; width:100%; font-size: 110%' value = '{{student.student_name}}'/></div><div class='cols' style='width: 15%; text-align: right'><span style='font-size:110%'><b>Student ID</b>&ensp;</span></div>";
		print_string += "<div class= 'cols' style='width:35%'><input type = 'text' style='width:135px; height:25px; font-size:110%' value = '{{student.student_id}}'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'><div class= 'cols' style='width:20%; text-align:right'><b><span style= 'font-size:110%'>Current School</span></b></div>";
		print_string += "<div class= 'cols' style='width:30%; margin-left:0.5em'><input type='text' style = 'height:25px; width:100%; font-size: 110%' value = '{{student.school}}'/></div><div class='cols' style='width: 15%; text-align: right'><span style='font-size:110%'><b>Date of Birth</b>&ensp;</span></div>";
		print_string += "<div class= 'cols' style = 'width:20%'><input type = 'date' style = 'height:25px; width:135px; font-size:110%' value = '{{student.date_birth}}'/></div><div class='cols' style ='width:15%; text-align:right'><b><span style = 'font-size:110%'>Grade&nbsp;</b>";
		print_string += "<input type='text' style = 'height: 25px; width:40px; font-size:110%' value = '" + {% if student.grade==0 %}"K"{%else%}{{student.grade}}{%endif%} + "'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'><div class= 'cols' style='width:20%; text-align:right'><b><span style= 'font-size:110%'>Plan Initiated at</span></b></div>";
		print_string += "<div class= 'cols' style='width:30%; margin-left:0.5em'><input type='text' style = 'height:25px; width:100%; font-size: 110%' value = '{{plan.school_develop}}'/></div>";
		print_string += "<div class= 'cols' style = 'width:15%; text-align:right'><b><span style= 'font-size:110%'>Teacher&nbsp;</span></b></div><div class= 'cols' style='width:35%'><input type = 'text' style='width:100%; height:25px; font-size:110%' value = '{{student.teacher}}'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'><div class ='cols' style='width:100%; text-align:right'><b><span style= 'font-size:110%'>Report Card Review</span></b></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'><div class= 'cols' style='width:20%; text-align:right'><b><span style= 'font-size:110%'>Intervention Area</span></b></div>";
		print_string += "<div class= 'cols' style='width:45%; margin-left:0.5em'><input type='text' style = 'height:25px; width:100%; font-size: 110%' value = '{{plan.intervention_area}}'/></div>";
		print_string += "<div class = 'cols' style='width:35%; text-align:right'><b><span style= 'font-size:110%'>Initial&nbsp;</span></b><input type = 'date' style = 'height:25px; width:140px; font-size: 110%' value = '{{student.report_card_reviewed}}'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'><div class= 'cols' style='width:20%; text-align:right'><b><span style= 'font-size:110%'>Intervention Level</span></b></div>";
		print_string += "<div class = 'cols' style='width:45%; margin-left:0.5em'><input type = 'text' style = 'height:25px; width:100%; font-size: 110%' value = '{{plan.intervention_level}}'/></div>";
		print_string += "<div class = 'cols' style='width:35%; text-align:right'><b><span style= 'font-size:110%'>Final&nbsp;</span></b><input type = 'date' style = 'height:25px; width:140px; font-size: 110%' value = '{{student.report_card_review_2}}'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'><div class= 'cols' style='width:50%; padding-left:1em'><b><span style= 'font-size:110%'>Current Level of Performance</span></b></div>";
		print_string += "<div class= 'cols' style='width:50%; padding-left:1em'><b><span style= 'font-size:110%'>Grade Level Expectation</span></b></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: flex-start; padding-top:0.3em'><div class='cols' style='width:48%'><textarea style='width: 100%' rows='7' >{{plan.current_level}}</textarea></div><div class='cols' style='width:4%'></div>";
		print_string += "<div class='cols' style='width:48%; text-align:right'><textarea style='width: 100%' rows='7' >{{plan.expectation}}</textarea></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:flex-start; padding-top:0.3em'><div class= 'cols' style='width:50%; padding-left:1em'><b><span style= 'font-size:110%'>Intervention Strategies</span></b></div>";
		print_string += "<div class= 'cols' style='width:50%; padding-left:1em'><b><span style= 'font-size:110%'>Method and Setting</span></b></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: flex-start; padding-top:0.3em'> <div class='cols' style='width:48%; text-align:right'><textarea style='width: 100%' rows='8' >{{plan.strategies}}</textarea></div><div class='cols' style='width:4%'></div>";
		print_string += "<div class='cols' style='width:48%; text-align:right'><div class='mini-columns' style='display:flex'>";
		print_string += "<div class='mini-cols' style='width:45%; text-align:right'><b><span style='font-size:110%'>Days per Week</span></b></div><div class='mini-cols' style='width:55%; margin-left:0.5em'>";
		print_string += "<input type = 'text' style='height:25px; width: 100%; font-size:110%' value = '{{plan.days_per_week}}'/></div></div>";
		print_string += "<div class='mini-columns' style='display:flex; padding-top:0.25em'><div class='mini-cols' style='width:45%; text-align:right'><b><span style='font-size:110%'>Minutes per session</span></b></div><div class='mini-cols' style='width:55%; margin-left:0.5em'>";
		print_string += "<input type = 'text' style='height:25px; width: 100%; font-size:110%' value = '{{plan.minutes_per_session}}'/></div></div>";
		print_string += "<div class='mini-columns' style='display:flex; padding-top:0.25em'><div class='mini-cols' style='width:45%; text-align:right'><b><span style='font-size:110%'>Students in Group</span></b></div><div class='mini-cols' style='width:55%; margin-left:0.5em'>";
		print_string += "<input type = 'text' style='height:25px; width: 100%; font-size:110%' value = '{{plan.students_in_group}}'/></div></div>";
		print_string += "<div class='mini-columns' style='display:flex'><div class='mini-cols' style='width:45%; text-align:right; padding-top:0.3em'><b><span style='font-size:110%'>Person Responsible</span></b></div><div class='mini-cols' style='width:55%; margin-left:0.5em'>";
		print_string += "<input type = 'text' style='height:25px; width: 100%; font-size:110%' value = '{{plan.person_responsible}}'/></div></div>";
		print_string += "<div class='mini-columns' style='display:flex; padding-top:0.25em'><div class='mini-cols' style='width:45%; text-align:right;'><b><span style='font-size:110%'>Monitoring Tool</span></b></div><div class='mini-cols' style='width:55%; margin-left:0.5em'>";
		print_string += "<input type = 'text' style='height:25px; width: 100%; font-size:110%' value = '{{plan.progress_monitoring_tool}}'/></div></div>";
		print_string += "<div class='mini-columns' style='display:flex; padding-top:0.25em'><div class='mini-cols' style='width:45%; text-align:right'><b><span style='font-size:110%'>Monitoring Freq</span></b></div><div class='mini-cols' style='width:55%; margin-left:0.5em'>";
		print_string += "<input type = 'text' style='height:25px; width: 100%; font-size:110%' value = '{{plan.frequency}}'/></div></div></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center; padding-top:0.8em'><div class= 'cols' style='width:55%; text-align:right'><b><span style= 'font-size:110%'>Who will provide support for Implementation?&nbsp;</span></b></div>";
		print_string += "<div class= 'cols' style='width:45%'><input type = 'text' style='width:100%; height:25px; font-size:110%' value = '{{plan.who_support_plan}}'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center; padding-top:0.8em'><div class= 'cols' style='width:42%; text-align:right'><b><span style= 'font-size:110%'>Anticipated Fidelity Date&nbsp;</span></b></div>";
		print_string += "<div class= 'cols' style='width:15%'><input type = 'text' style='width:100%; height:25px; font-size:110%' value = '{{plan.anticipated_fidelity_assessment}}'/></div>";
		print_string += "<div class= 'cols' style='width:28%; text-align:right'><b><span style= 'font-size:110%'>Anticipated Review Date&nbsp;</span></b></div>";
		print_string += "<div class= 'cols' style='width:15%'><input type = 'text' style='width:100%; height:25px; font-size:110%' value = '{{plan.anticipated_review_date}}'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center; padding-top:0.8em; padding-bottom:1em'><div class= 'cols' style='width:27%; text-align:right'><b><span style= 'font-size:110%'>Other ESE/504?&nbsp;</span></b></div>";
		print_string += "<div class= 'cols' style='width:34%'><input type = 'text' style='width:100%; height:25px; font-size:110%' value = '{{student.other_ese_program_504}}'/></div>";
		print_string += "<div class= 'cols' style='width:24%; text-align:right'><b><span style= 'font-size:110%'>Previous Retentions&nbsp;</span></b></div>";
		print_string += "<div class= 'cols' style='width:15%'><input type = 'text' style='width:100%; height:25px; font-size:110%' value = '{{student.anticipated_review_date}}'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center; padding-top:0.8em'><div class= 'cols' style='width:100%; text-align:right'><b><span style= 'font-size:110%'>Progress Monitoring (for recording scores manually, official results below.)</span></b></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center; padding-top:0.2em'><div class='cols' style='width:9%; text-align:right'><b><input type='text' style= 'width:100%; font-size:100%' value ='Date'/></b></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center'><div class='cols' style='width:9%; text-align:right'><b><input type='text' style= 'width:100%; font-size:100%' value ='Results'/></b></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center; padding-top:0.8em'><div class='cols' style='width:9%; text-align:right'><b><input type='text' style= 'width:100%; font-size:100%' value ='Date'/></b></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content: center'><div class='cols' style='width:9%; text-align:right'><b><input type='text' style= 'width:100%; font-size:100%' value ='Results'/></b></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div>";
		print_string += "<div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div><div class='cols' style='width:13%'><input type = 'text' style='width:100%'/></div></div>";
		print_string += "</div>";
		print_string += "<div style='text-align: center; margin-top: 0.5em; padding-top:1em'><h4>ST. JOHNS COUNTY SCHOOL DISTRICT</h4><h4>Problem Solving/Response to Intervention Team</h4><h4><b><u>Intervention Plan for Academics</b></u></h4></div>";
   		print_string += "<div class='container' style='width: 100%'>";
		print_string += "<div class='columns' style='display:flex; justify-content:center; padding-top: 0.3em'>";
		print_string += "<div class ='cols' style='width:10%'></div><div class = 'cols' style='width:80%; text-align: center'><b><span style='font-size:110%'>Progress Monitoring Data</span></b>";
		print_string += "</div><div class ='cols' style='width:10%'></div></div>";
		print_string += "<div class='columns' style='display:flex; justify-content:center; padding-top:0.5em; padding-bottom:1em'><div class ='cols' style='width:10%'></div><div class = 'cols' style='width:80%'><table id='print_test_table' class='table table-bordered'><thead class='thead-dark'>";
		print_string += "<tr style='height:25px'><th scope='col' style='width:25%; text-align:center; font-size:100%'><b>Monitoring Date</b></th>";
		print_string += "<th scope='col' style='width:25%; text-align:center; font-size:100%'><b>Student Results</b></th><th scope='col' style='width:25%; text-align:center; font-size:100%'><b>Peer results</b></th>";
		print_string += "<th scope='col' style='width:25%; text-align:center; font-size:100%'><b>Goal</b></th></tr></thead>";
		print_string += "<tbody>";
		print_string += test_string;
		print_string += "</tbody></table></div><div class ='cols' style='width:10%'></div></div></div>";
		{%if image%}print_string += " <img src = " + "{{image}}?" + d.getTime() + ">";
			{%else%} if(img_elem.getAttribute('src')!=""){print_string += "<img src = " + img_elem.getAttribute('src') + "?" + d.getTime() + ">";};{%endif%}
		$('#table_print_div').html(print_string);
		
		
			$('#table_print_div').printThis();
				

});
</script>

<script>
$('#print_fid_assess').on('click', function(event){
	event.preventDefault();
	var print_string="";
	{%set namelist=student.student_name.split(',')%}
	print_string += "<div style='text-align: center'><h4>ST. JOHNS COUNTY SCHOOL DISTRICT</h4><h4>Intervention Services</h4><h4> 40 Orange Street, St. Augustine, FL 32084</h4><h4 style='padding-top:0.25em; font-size:120%'>";
	print_string+= "<b>Intervention Fidelity Assessment</b></h4></div>";
	print_string+= '<div  class="container" style="width:100%; padding-bottom:0.5em"><div class="columns" style="display:flex; padding: 0.25em 0em; text-align:center; font-size:105%">';
	print_string+= '<div class="cols" style="width:10%"></div><div class="cols" style="width:80%; text-align:center">Observations of intervention implementation should be completed at least once during Tier 2 and once during Tier 3. Use the guideline below when observing intervention implementation to assess fidelity.</div>';
	print_string+= '<div class="cols" style="width:10%"></div></div></div>';
	print_string+= '<div class="container" style="width: 65%; padding-top:0.25em; border: 2px solid black; max-width:1500px; min-width:880px"><div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; font-size:105%">';
	print_string+= '<div class="cols" style="width:20%; text-align:right">' + "Student's Legal Name:&ensp;</div>";
	print_string+= "<div class='cols' style='width:15%'><u>{{namelist[1].strip()}} {{namelist[0]}}</u></div>";
	print_string+= '<div class="cols" style="width:25%"></div><div class="cols" style="width:15%; text-align:right">Date of Birth:&ensp;</div><div class="cols" style="width:10%"><u>{{student.date_birth}}</u></div><div class="cols" style="width:10%"></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; font-size:105%; padding-top:0.5em; padding-left:0.5em">';
	print_string+= '<div class="cols" style="width:20%; text-align:right">School:&ensp;</div><div class="cols" style="width:15%"><u>' + "{{student.school}}</u></div>";
	print_string+= '<div class="cols" style="width:40%; text-align:center">Teacher:&ensp;<u>' + "{{plan.teacher}}</u></div>";
	print_string+= '<div class="cols" style="width:10%; text-align:right">Grade:&ensp;<u></div><div class="cols" style="width:10%">{%if student.grade==0%}K{%else%}{{student.grade}}{%endif%}</u></div><div class="cols" style="width:10%"></div></div></div>';
	print_string+= "<div class='container' style='width:65%; margin-top:1em; padding-top:0.25em; padding-bottom:0.25em; border: 2px solid black; max-width:1500px; min-width:880px'>" + '<div class="columns" style="margin:auto; text-align:center">';
	print_string+= '<h3 style="text-align:center; font-size:115%"><u><b>Fidelity Assessment</u></b></h3></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; font-size:110%"><div class="cols" style="width:20%; text-align:right">' + "Observer's name/title:&ensp;</div>";
	print_string+= '<div class="cols" style="width:40%"><input type="text" name="observe_name" style="width:100%" value="';
{%if plan.observe_name%}print_string+= "{{plan.observe_name}}";{%endif%}
	print_string+= '"/></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; margin-top:0.25em; padding-left:0.5em; font-size:110%"><div class="cols" style="width:20%; text-align:right">' + "Observer's signature:&ensp;</div>";
	print_string+= '<div class="cols" style="width:40%"><b>_______________________________________</b></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; margin-top:0.5em; padding-left:0.5em; font-size:110%"><div class="cols" style="width:20%; text-align:right">Intervention Area:&ensp;</div>';
	print_string+= '<div class="cols" style="width:40%"><input type="text" style="width:100%" value="{{plan.intervention_area}}"/></div><div class="cols" style="width:15%; text-align:right">Tier:&ensp;</div><div class="cols" style="width:10%"><input type="text" style="width:100%" value="{{plan.intervention_level}}"/></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:110%"><div class="cols" style="width:20%; text-align:right">Strategy Observed:&ensp;</div>';
	print_string+= '<div class="cols" style="width:40%"><input type="text" style="width:100%" {%if plan.observe_strategy%}value="{{plan.observe_strategy}}"{%endif%}/></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:110%"><div class="cols" style="width:20%; text-align:right">Observation date:&ensp;</div>';
	print_string+= '<div class="cols" style="width:40%"><input type="date" name="observe_date" style="width:100%" {%if plan.observe_date%}value="{{plan.observe_date}}"{%endif%}/></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:110%"><div class="cols" style="width:20%; text-align:right"><u><b>Fidelity Questions:</u></b>&ensp;</div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:110%"><div class="cols" style="width:75%">Was the intervention being implemented as stated on the intervention plan?</div>';
	print_string+= '<div class="cols" style="width:10%"><input type="text" style="width:100%" {%if plan.fid_question_first %}value="{{plan.fid_question_first}}"{%endif%}/></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:110%"><div class="cols" style="width:75%">Was the stated strategy/program being utilized appropriately?</div>';
	print_string+= '<div class="cols" style="width:10%"><input type="text" style="width:100%" {%if plan.fid_question_2 %}value="{{plan.fid_question_2}}"{%endif%}/></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.5em; font-size:110%"><div class="cols" style="width:75%">Was the student engaged in the activity?</div>';
	print_string+= '<div class="cols" style="width:10%"><input type="text" style="width:100%" {%if plan.fid_question_3 %}value="{{plan.fid_question_3}}"{%endif%}/></div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:110%"><div class="cols" style="width:20%; text-align:right"><u><b>Comments:</u></b>&ensp;</div></div>';
	print_string+= '<div class="columns" style="display:flex; justify-content:flex-start; padding-left:0.5em; margin-top:0.75em; font-size:110%"><div class="cols" style="width:85%; text-align:right">';
	print_string+= '<textarea name="observe_comment" style="width: 100%" rows="4">{%if plan.observe_comment%}{{plan.observe_comment}}{%endif%}</textarea></div></div></div>';
	
	$('#fid_print_div').html(print_string);
	$('#fid_print_div').printThis();	
})

</script>

<script type="text/javascript">
$('select[multiple].mult').multiselect({selectAll: false,
search : true,
texts: {placeholder: 'Select Strategies',
	search:'Search Strategies'
	},
maxWidth : 750,
maxHeight : 375
});
{% if (plan.active== False or plan.plan_final==True) %}$('select[multiple].mult').multiselect('disable');
{%else%}
 document.ready(function(){$('#strategies_select').multiselect({

}
  );{%endif%}
});
</script>

<script>
$('#intervention_area_1').on("change", function(){
var x = this.value;
var add_string="";
var y ="";
var options=[];
var z="";
{%for strat in all_strategies%}
y="{{strat.intervention_area}}"
z="{{strat.strategy}}"
if (y == x){add_string+= "<option class='strategies' value='{{strat.strategy}}'>{{strat.strategy}}</option>";
options.push({'name' : z , 'value' : z });}
{%endfor%}

$('select[multiple].mult').multiselect('loadOptions', options);

});
</script>

<script>
$('#rev_checkbox').on('click', function(){
if($(this).prop("checked")== true){$('#rev_date').prop("readonly", false); $('#rev_date').css("background-color", "white");}
else{$('#rev_date').prop("readonly", true);
$('#rev_date').css("background-color", "gainsboro");
if($('#rev_date').val()){
alert('If you save with Review Completed unchecked, the accompanying date will be cleared!');}}
})

$('#fid_checkbox').on('click', function(){
if($(this).prop("checked")== true){$('#fid_date').prop("readonly", false); $('#fid_date').css("background-color", "white");}
else{$('#fid_date').prop("readonly", true);
$('#fid_date').css("background-color", "gainsboro");
if($('#fid_date').val()){
alert('If you save with Fidelity Assessment Completed unchecked, the accompanying date will be cleared!');}}
})

</script>

{%endblock%}